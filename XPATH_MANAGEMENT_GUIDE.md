# 📋 XPath规则管理功能使用指南

## 🎯 功能概述

新增的XPath规则管理功能允许您：
- 永久保存自定义XPath规则
- 为每个规则设置有意义的名称
- 管理所有已保存的规则
- 跟踪规则的使用统计
- 快速应用常用规则
- 删除不需要的规则

## 🚀 快速开始

### 1. 保存XPath规则

1. **输入XPath规则**
   - 在XPath输入框中输入您的自定义规则
   - 例如：`//a[@class='product-link']/@href`

2. **保存规则**
   - 点击"💾 保存"按钮
   - 在弹出的对话框中输入规则名称
   - 例如："商品页面链接"、"新闻标题链接"等

3. **确认保存**
   - 点击确定后，规则将永久保存
   - 系统会显示保存成功的提示

### 2. 管理已保存规则

1. **打开管理界面**
   - 点击"📋 管理"按钮
   - 弹出规则管理窗口

2. **查看规则信息**
   - 规则名称和XPath表达式
   - 创建时间
   - 使用次数统计

3. **应用规则**
   - 点击"使用"按钮
   - 规则会自动填入XPath输入框
   - 使用次数会自动增加

4. **删除规则**
   - 点击"删除"按钮
   - 确认删除操作
   - 规则将被永久删除

### 3. 使用预设规则

1. **打开预设规则**
   - 点击"预设"按钮
   - 查看所有可用规则

2. **规则分类显示**
   - **内置规则**：系统预设的常用规则
   - **自定义规则**：您保存的规则（按使用次数排序）

3. **应用规则**
   - 点击任意规则即可应用

## 📝 使用技巧

### 规则命名建议

**好的命名示例：**
- ✅ "商品详情页链接"
- ✅ "新闻文章标题"
- ✅ "PDF下载文件"
- ✅ "高清产品图片"

**避免的命名：**
- ❌ "链接1"
- ❌ "test"
- ❌ "xpath"

### 常用XPath规则模板

#### 电商网站
```xpath
# 商品链接
//a[contains(@class, 'product') or contains(@class, 'item')]/@href

# 商品图片
//img[contains(@class, 'product-img') or contains(@class, 'item-img')]/@src

# 价格信息
//*[contains(@class, 'price')]/text()
```

#### 新闻网站
```xpath
# 新闻标题链接
//h1//a/@href | //h2//a/@href | //h3//a/@href

# 新闻摘要
//div[contains(@class, 'summary') or contains(@class, 'excerpt')]//text()

# 发布时间
//*[contains(@class, 'time') or contains(@class, 'date')]/@datetime
```

#### 社交媒体
```xpath
# 用户头像
//img[contains(@class, 'avatar') or contains(@class, 'profile')]/@src

# 帖子链接
//a[contains(@href, '/post/') or contains(@href, '/status/')]/@href
```

#### 文档下载
```xpath
# 所有文档文件
//a[contains(@href, '.pdf') or contains(@href, '.doc') or contains(@href, '.ppt') or contains(@href, '.xls')]/@href

# 图片文件
//a[contains(@href, '.jpg') or contains(@href, '.png') or contains(@href, '.gif')]/@href

# 视频文件
//a[contains(@href, '.mp4') or contains(@href, '.avi') or contains(@href, '.mov')]/@href
```

## 🔧 高级功能

### 规则组合使用

您可以保存多个相关的规则，按需组合使用：

1. **保存基础规则**
   - "所有链接": `//a/@href`
   - "外部链接": `//a[starts-with(@href, 'http')]/@href`
   - "站内链接": `//a[starts-with(@href, '/')]/@href`

2. **保存特定规则**
   - "导航菜单": `//nav//a/@href`
   - "侧边栏链接": `//aside//a/@href`
   - "底部链接": `//footer//a/@href`

### 使用统计分析

- **查看使用频率**：管理界面显示每个规则的使用次数
- **优化规则集**：删除很少使用的规则
- **快速访问**：常用规则在预设列表中排在前面

## 🛡️ 数据安全

### 数据存储
- 所有规则保存在本地浏览器存储中
- 数据不会上传到任何服务器
- 卸载插件时数据会被清除

### 备份建议
如果您有重要的规则，建议：
1. 记录规则名称和XPath表达式
2. 导出到文本文件保存
3. 定期备份重要规则

## ❓ 常见问题

### Q1: 规则保存后找不到了？
**A:** 检查管理界面中是否存在，可能是命名时输入的名称不够明显。

### Q2: 删除了重要规则怎么办？
**A:** 删除操作不可恢复，建议重要规则要做好备份记录。

### Q3: 规则太多了，如何整理？
**A:** 可以根据使用频率删除不常用的规则，或者使用更具描述性的名称。

### Q4: 为什么使用次数没有增加？
**A:** 只有通过"管理"界面或"预设"界面应用规则时才会增加使用次数。

### Q5: 可以导入/导出规则吗？
**A:** 当前版本不支持导入导出，建议手动记录重要规则。

## 🎉 最佳实践

1. **规则命名要清晰**：使用描述性的名称
2. **定期整理规则**：删除不再使用的规则
3. **分类保存规则**：按网站类型或用途分类
4. **测试后再保存**：确保规则正确工作后再保存
5. **备份重要规则**：手动记录关键规则的XPath表达式

---

💡 **提示**: 这个功能大大提高了XPath规则的复用性和管理效率，让您的URL提取工作更加高效！
