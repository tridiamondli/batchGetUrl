<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSPä¿®å¤éªŒè¯é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
        }
        .test-links a {
            display: block;
            margin: 5px 0;
            color: #2980b9;
            text-decoration: none;
            padding: 5px;
            background: #f8f9fa;
            border-radius: 3px;
        }
        .test-links a:hover {
            text-decoration: underline;
            background: #e9ecef;
        }
        .instruction {
            background: #d4edda;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border: 1px solid #c3e6cb;
        }
        .warning {
            background: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid #ffeaa7;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ CSPä¿®å¤éªŒè¯é¡µé¢</h1>
        
        <div class="instruction">
            <h3>éªŒè¯è¯´æ˜</h3>
            <p>è¿™ä¸ªé¡µé¢ç”¨äºéªŒè¯Chromeæ’ä»¶çš„CSPï¼ˆContent Security Policyï¼‰é—®é¢˜æ˜¯å¦å·²ä¿®å¤ã€‚</p>
            <ol>
                <li>ä½¿ç”¨Chromeæ’ä»¶æå–è¿™ä¸ªé¡µé¢çš„é“¾æ¥</li>
                <li>ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®</li>
                <li>æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦è¿˜æœ‰CSPé”™è¯¯</li>
                <li>æµ‹è¯•è¯¦æƒ…çª—å£ä¸­çš„æ‰€æœ‰æŒ‰é’®åŠŸèƒ½</li>
            </ol>
        </div>

        <div class="warning">
            <strong>âš ï¸ å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜ï¼š</strong>
            <ul>
                <li>ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„æ’ä»¶ä»£ç </li>
                <li>é‡æ–°åŠ è½½æ’ä»¶ï¼ˆåœ¨chrome://extensions/ä¸­ç‚¹å‡»åˆ·æ–°ï¼‰</li>
                <li>æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯</li>
                <li>ç¡®è®¤æµè§ˆå™¨ç‰ˆæœ¬æ”¯æŒManifest V3</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>æµ‹è¯•é“¾æ¥ç»„1 - åŸºç¡€é“¾æ¥</h3>
            <div class="test-links">
                <a href="https://www.example1.com">ç¤ºä¾‹é“¾æ¥1</a>
                <a href="https://www.example2.com/path">ç¤ºä¾‹é“¾æ¥2</a>
                <a href="https://www.example3.com/page.html">ç¤ºä¾‹é“¾æ¥3</a>
                <a href="https://github.com/user/repo">GitHubé“¾æ¥</a>
                <a href="https://stackoverflow.com/questions/123">Stack Overflowé“¾æ¥</a>
            </div>
        </div>

        <div class="test-section">
            <h3>æµ‹è¯•é“¾æ¥ç»„2 - ç›¸å¯¹è·¯å¾„</h3>
            <div class="test-links">
                <a href="/root-path.html">æ ¹è·¯å¾„é“¾æ¥</a>
                <a href="./relative-path.html">ç›¸å¯¹è·¯å¾„é“¾æ¥</a>
                <a href="../parent-path.html">çˆ¶è·¯å¾„é“¾æ¥</a>
                <a href="subdir/file.html">å­ç›®å½•é“¾æ¥</a>
            </div>
        </div>

        <div class="test-section">
            <h3>æµ‹è¯•é“¾æ¥ç»„3 - ç‰¹æ®Šå­—ç¬¦</h3>
            <div class="test-links">
                <a href="https://example.com/path?param=value&other=123">å¸¦å‚æ•°é“¾æ¥</a>
                <a href="https://example.com/path#section">å¸¦é”šç‚¹é“¾æ¥</a>
                <a href="https://example.com/file.pdf">PDFæ–‡ä»¶é“¾æ¥</a>
                <a href="mailto:test@example.com">é‚®ä»¶é“¾æ¥</a>
                <a href="tel:+1234567890">ç”µè¯é“¾æ¥</a>
            </div>
        </div>

        <div class="test-section">
            <h3>é¢„æœŸç»“æœæ£€æŸ¥</h3>
            <p><strong>æˆåŠŸæ ‡å‡†ï¼š</strong></p>
            <ul>
                <li>âœ… è¯¦æƒ…çª—å£èƒ½å¤Ÿæ­£å¸¸æ‰“å¼€</li>
                <li>âœ… æ§åˆ¶å°ä¸­æ²¡æœ‰CSPé”™è¯¯ä¿¡æ¯</li>
                <li>âœ… "ğŸ“‹ å¤åˆ¶å…¨éƒ¨URL" æŒ‰é’®å¯ä»¥å·¥ä½œ</li>
                <li>âœ… "ğŸ’¾ å¯¼å‡ºä¸ºæ–‡æœ¬" æŒ‰é’®å¯ä»¥å·¥ä½œ</li>
                <li>âœ… æ¯ä¸ªURLçš„"å¤åˆ¶"æŒ‰é’®å¯ä»¥å·¥ä½œ</li>
                <li>âœ… "ğŸ” è°ƒè¯•ä¿¡æ¯" æŒ‰é’®å¯ä»¥æ˜¾ç¤ºç¯å¢ƒä¿¡æ¯</li>
            </ul>
            
            <p><strong>å¦‚æœå¤±è´¥ï¼š</strong></p>
            <ul>
                <li>âŒ æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯</li>
                <li>âŒ æ£€æŸ¥æ˜¯å¦æ˜¯æƒé™æˆ–APIå…¼å®¹æ€§é—®é¢˜</li>
                <li>âŒ å°è¯•åœ¨HTTPSç¯å¢ƒä¸‹æµ‹è¯•</li>
                <li>âŒ å‚è€ƒDETAILS_TROUBLESHOOTING.mdæ–‡æ¡£</li>
            </ul>
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½åçš„åˆå§‹åŒ–
        window.addEventListener('load', function() {
            console.log('CSPéªŒè¯é¡µé¢å·²åŠ è½½');
            console.log('å½“å‰URL:', window.location.href);
            console.log('æ—¶é—´:', new Date().toLocaleString());
            
            // æ£€æŸ¥ä¸€äº›åŸºç¡€API
            console.log('åŸºç¡€ç¯å¢ƒæ£€æŸ¥:');
            console.log('- navigator.clipboard:', navigator.clipboard ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ');
            console.log('- Blob:', typeof Blob !== 'undefined' ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ');
            console.log('- URL.createObjectURL:', typeof URL !== 'undefined' && URL.createObjectURL ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ');
            console.log('- window.open:', window.open ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ');
        });
    </script>
</body>
</html>
